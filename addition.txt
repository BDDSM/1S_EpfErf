///////// РЕГИСТРАЦИЯ ЗАПУСКА /////////////
Попытка
	ФайлОбработки = Новый Файл(ИспользуемоеИмяФайла);
	ИспользуемоеИмя = ?(Найти(ВРег(ИспользуемоеИмяФайла), ".TMP")>0, ИспользуемоеИмя, ФайлОбработки.Имя);
	ВидФайла = ?(Найти(ВРег(ИспользуемоеИмя), ".ERF")>0 ,"Отчет", "Обработка");
	Комментарий = "";
	ИспользуемоеИмя = Лев(ИспользуемоеИмя,  Найти(ИспользуемоеИмя, ".")-1);
	тИмяОбр = Метаданные().Имя;
	тСиноним = Метаданные().Синоним;
	Если Лев(ВРег(тИмяОбр),5) = "ВНЕШН" Тогда
		Комментарий = "Имя обработки: "+тИмяОбр+""+?(ПустаяСтрока(тСиноним),", Пустой синоним", ", Синоним: """+тСиноним+"""");
		ИмяОбработки = ИспользуемоеИмя;
	Иначе
		ИмяОбработки = тИмяОбр;
	КонецЕсли;
	ВнешниеИсточникиДанных.ахПротоколИспользованияВнешнихОбработок.Таблицы.OuterProgsUsage.ЗафиксироватьЗапускВнешнейОбработки(ИмяОбработки, ВидФайла,,Комментарий);
Исключение
	ЗаписьЖурналаРегистрации("Ошибка регистрации исполнения внешней обработки", УровеньЖурналаРегистрации.Предупреждение, ,ЭтотОбъект.Метаданные().ПолноеИмя(), ОписаниеОшибки()); 
КонецПопытки;
//////////////////////////////////////////
